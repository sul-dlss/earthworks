<%= render Blacklight::System::ModalComponent.new do |component| %>
  <% component.with_title { t('earthworks.code_snippet.title') } %>
  <% component.with_body do %>
    <div class="p-3" data-controller="clipboard-copy">
      <div class="mb-2">
        <ul id='codeNav' class='nav nav-tabs border-0' role='tablist'>
          <li class="nav-item" role="presentation">
              <button class="nav-link btn-link border-0 pl-0 active code-snippet-tab" id="python-tab" data-bs-toggle="tab" data-bs-target="#python-code" type="button" role="tab" 
                aria-controls="python-code" aria-selected="true" data-action="clipboard-copy#reset">Python</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link btn-link border-0 code-snippet-tab" id="r-tab" data-bs-toggle="tab" data-bs-target="#r-code"  type="button" role="tab" 
                aria-controls="r-code" aria-selected="false" data-action="clipboard-copy#reset">R</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link btn-link border-0 code-snippet-tab" id="leaflet-tab" data-bs-toggle="tab" data-bs-target="#leaflet-code"  type="button" role="tab" 
                aria-controls="leaflet-code" aria-selected="false" data-action="clipboard-copy#reset">Leaflet</button>
          </li>
        </ul>
      </div>

      <!-- Copy to clipboard button -->
      <div class="bd-clipboard p-3">
        <button id="copyClipboard" class="btn btn-sm btn-outline-primary btn-clipboard" data-action="clipboard-copy#copy" data-clipboard-copy-target-param=".tab-pane.active pre code">
         <span id="copyCheck" class="d-none" data-clipboard-copy-target="copyButtonIcon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
          </svg>
         </span>
         <span id="copyClipText" data-clipboard-copy-target="copyButtonText">Copy</span>
        </button>
      </div>

      <!-- Code snippet content -->
      <div class="tab-content code-snippet-content" id="codeContent">
        <div class="tab-pane fade show p-3 active" id="python-code" role="tabpanel" aria-labelledby="python-tab">
          <%= code_block(render_python) %> 
        </div>
        <div class="tab-pane fade p-3" id="r-code" role="tabpanel" aria-labelledby="r-tab">
          <%= code_block(render_r) %> 
        </div>
        <div class="tab-pane fade p-3" id="leaflet-code" role="tabpanel" aria-labelledby="leaflet-tab">
          <%= code_block(render_leaflet) %> 
        </div>
      </div>
    </div>
  <% end %>
<% end %>
